<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="HabitTracker.KategoriPage"
             Title="{Binding Kategori}">

    <Grid RowDefinitions="Auto,*">
        <!-- Bakgrundsbild -->
        <Image Source="habit_bg.png"
               Aspect="AspectFit"
               Grid.RowSpan="2"
               HorizontalOptions="Fill"
               VerticalOptions="Fill" />
        <Label x:Name="ClockLabel"
               TextColor="White"
               FontSize="18"
               FontAttributes="Bold"
               HorizontalOptions="End"
               VerticalOptions="Start"
               Margin="10"
               Grid.Row="0"/>

        <ScrollView Grid.Row="1">
            <VerticalStackLayout Padding="20" Spacing="15">

                <Label x:Name="KategoriLabel"
                       FontSize="24"
                       HorizontalOptions="Center" />

                <Button Text="LÃ¤gg till vana"
                        Clicked="OnLaggTillVanaClicked"
                        WidthRequest="160"
                        HeightRequest="80"/>

                <CollectionView x:Name="vanaLista">
                    <CollectionView.ItemTemplate>
                        <DataTemplate>
                            <Frame Padding="10" Margin="5" BorderColor="Gray" BackgroundColor="#1E1E1E" CornerRadius="10">
                                <VerticalStackLayout Spacing="10">

                                    <Label Text="{Binding Name}" FontSize="25" HorizontalOptions="Center" />
                                    <Label Text="{Binding Kategori, StringFormat='Kategori: {0}'}" FontSize="25" TextColor="Grey"/>
                                    <Label Text="{Binding AntalDagarGjorda, StringFormat='Dagar gjorda: {0}'}" FontSize="25" TextColor="LightGreen"/>

                                    <HorizontalStackLayout BindableLayout.ItemsSource="{Binding XPList}">
                                        <BindableLayout.ItemTemplate>
                                            <DataTemplate>
                                                <BoxView WidthRequest="15" HeightRequest="15" Color="#4CAF50" CornerRadius="3"/>
                                            </DataTemplate>
                                        </BindableLayout.ItemTemplate>
                                    </HorizontalStackLayout>

                                    <Label Text="{Binding Level,StringFormat='Level: {0}'}"
                                           FontSize="20"
                                           FontAttributes="Bold"
                                           TextColor="Beige"
                                           HorizontalOptions="Center"/>

                                    <Button Text="Markera som gjord"
                                            Clicked="OnMarkeraGjortClicked"
                                            BackgroundColor="MediumPurple"
                                            TextColor="Beige"
                                            CornerRadius="8" />

                                    <Button Text="Ta bort vana"
                                            Clicked="OnTaBortVanaClicked"
                                            BackgroundColor="DarkRed"
                                            TextColor="Beige"
                                            CornerRadius="8"/>
                                </VerticalStackLayout>
                            </Frame>
                        </DataTemplate>
                    </CollectionView.ItemTemplate>
                </CollectionView>

                <Button Text="Huvudmenyn"
                        Clicked="OnTillbakaClicked"
                        BackgroundColor="LightBlue"
                        HorizontalOptions="Center"
                        Margin="0,20,0,0"/>
            </VerticalStackLayout>
        </ScrollView>
    </Grid>
</ContentPage>
