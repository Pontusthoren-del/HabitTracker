<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="HabitTracker.KategoriPage"
             Title="{Binding Kategori}"
             >
    <Grid>
        <!-- Bakgrundsbild -->
        <Image Source="habit_bg.png"
               Aspect="AspectFit"
               HorizontalOptions="Fill"
               VerticalOptions="Fill" />

        <ScrollView>

            <VerticalStackLayout Padding="20" Spacing="15">

                <Label x:Name="KategoriLabel"
               FontSize="24"
               HorizontalOptions="Center" />

                <Button Text="LÃ¤gg till vana" Clicked="OnLaggTillVanaClicked" WidthRequest="160" HeightRequest="80"/>

                <CollectionView x:Name="vanaLista">
                    <CollectionView.ItemTemplate>
                        <DataTemplate>
                            <Frame Padding="10" Margin="5" BorderColor="Gray" BackgroundColor="#1E1E1E" CornerRadius="10">
                                <VerticalStackLayout Spacing="10">

                                    <Label Text="{Binding Name}" FontSize="25" HorizontalOptions="Center" />

                                    <Label Text="{Binding Kategori, StringFormat='Kategori: {0}'}" FontSize="25" TextColor="Grey"/>

                                    <Label Text="{Binding AntalDagarGjorda, StringFormat='Dagar gjorda: {0}'}" FontSize="25" TextColor="LightGreen"/>
                                    <HorizontalStackLayout BindableLayout.ItemsSource="{Binding XPList}">

                                        <BindableLayout.ItemTemplate>
                                            <DataTemplate>
                                                <BoxView WidthRequest="15" HeightRequest="15" Color="#4CAF50" CornerRadius="3"/>
                                            </DataTemplate>
                                        </BindableLayout.ItemTemplate>
                                    </HorizontalStackLayout>
                                    <Label Text="{Binding Level,StringFormat='Level: {0}'}"
                                       FontSize="20"
                                       FontAttributes="Bold"
                                       TextColor="Beige"
                                      HorizontalOptions="Center"/>

                                    <Button Text="Markera som gjord" Clicked="OnMarkeraGjortClicked" 
                                    BackgroundColor="MediumPurple" TextColor ="Beige" CornerRadius="8" />

                                    <Button Text="Ta bort vana" Clicked="OnTaBortVanaClicked" 
                                        
                                        BackgroundColor="DarkRed" TextColor ="Beige" CornerRadius="8"/>
                                </VerticalStackLayout>
                            </Frame>
                        </DataTemplate>
                    </CollectionView.ItemTemplate>
                </CollectionView>

                <Button
            Text="Huvudmenyn"
            Clicked="OnTillbakaClicked"
            BackgroundColor="LightBlue"
            HorizontalOptions="Center"
            Margin="0,20,0,0"/>


            </VerticalStackLayout>
        </ScrollView>
    </Grid>
</ContentPage>
